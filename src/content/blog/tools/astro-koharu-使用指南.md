---
title: astro-koharu ä½¿ç”¨æŒ‡å—
link: astro-koharu-guide
catalog: true
date: 2025-12-07 01:18:00
description: astro-koharu åšå®¢ç³»ç»Ÿå®Œæ•´ä½¿ç”¨æŒ‡å—ï¼ŒåŒ…å«å¿«é€Ÿå¼€å§‹ã€é…ç½®è¯´æ˜ã€æ–‡ç« ç³»ç»Ÿã€ç•Œé¢åŠŸèƒ½ç­‰è¯¦ç»†ä»‹ç»
tags:
  - Astro
  - åšå®¢
  - æ•™ç¨‹
categories:
  - å·¥å…·
draft: true
---

æœ¬æ–‡åŸºæœ¬ç”± AI åˆ¶ä½œï¼Œè¿˜å¤„äº WIP é˜¶æ®µã€‚

ä¸€ä»½å®Œæ•´çš„ astro-koharu åšå®¢ç³»ç»Ÿä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹å¹¶å……åˆ†åˆ©ç”¨æ‰€æœ‰åŠŸèƒ½ç‰¹æ€§ã€‚

## å¿«é€Ÿå¼€å§‹

### é¡¹ç›®ç®€ä»‹

astro-koharu æ˜¯ä¸€ä¸ªåŸºäº Astro 5.x æ„å»ºçš„ç°ä»£åŒ–åšå®¢ç³»ç»Ÿï¼Œä» Hexo è¿ç§»è€Œæ¥ï¼Œè®¾è®¡çµæ„Ÿæ¥è‡ª [Shoka](https://github.com/amehime/hexo-theme-shoka) ä¸»é¢˜ã€‚

**æ ¸å¿ƒç‰¹ç‚¹ï¼š**

- åŸºäº Astro 5.xï¼Œé™æ€ç«™ç‚¹ç”Ÿæˆï¼Œæ€§èƒ½ä¼˜å¼‚
- ä¼˜é›…çš„æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
- åŸºäº Pagefind çš„æ— åç«¯å…¨ç«™æœç´¢
- å®Œæ•´çš„ Markdown å¢å¼ºåŠŸèƒ½ï¼ˆGFMã€ä»£ç é«˜äº®ã€è‡ªåŠ¨ç›®å½•ï¼‰
- çµæ´»çš„å¤šçº§åˆ†ç±»ä¸æ ‡ç­¾ç³»ç»Ÿ
- ç‰¹è‰²å‘¨åˆŠ/ç³»åˆ—æ–‡ç« æ”¯æŒ
- å“åº”å¼è®¾è®¡
- è‰ç¨¿ä¸ç½®é¡¶åŠŸèƒ½
- é˜…è¯»è¿›åº¦æ¡ä¸é˜…è¯»æ—¶é—´ä¼°ç®—
- å‹é“¾ç³»ç»Ÿä¸å½’æ¡£é¡µé¢
- RSS è®¢é˜…æ”¯æŒ

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/cosZone/astro-koharu.git
cd astro-koharu

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# é¢„è§ˆç”Ÿäº§æ„å»º
pnpm preview
```

### å¿«é€Ÿéƒ¨ç½²

ä½¿ç”¨ Vercel è¿›è¡Œä¸€é”®éƒ¨ç½²ï¼š

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/cosZone/astro-koharu&project-name=astro-koharu&repository-name=astro-koharu)

## åŸºæœ¬é…ç½®

### ç«™ç‚¹é…ç½®

ç¼–è¾‘ `src/constants/site-config.ts` æ–‡ä»¶é…ç½®ç«™ç‚¹åŸºæœ¬ä¿¡æ¯ï¼š

```typescript
export const siteConfig: SiteConfig = {
  title: 'ä½™å¼¦ã®åšå®¢',           // ç½‘ç«™æ ‡é¢˜
  alternate: 'cosine',           // è‹±æ–‡çŸ­åï¼ˆç”¨ä½œ logo æ–‡æœ¬ï¼‰
  subtitle: 'WA çš„ä¸€å£°å°±å“­äº†',   // å‰¯æ ‡é¢˜
  name: 'cos',                   // ç«™ç‚¹ä½œè€…ç®€ç§°
  description: 'FE / ACG / ...',  // ç«™ç‚¹ç®€ä»‹
  avatar: '/img/avatar.webp',    // å¤´åƒè·¯å¾„
  showLogo: true,                // æ˜¯å¦æ˜¾ç¤º logo
  author: 'cos',                 // æ–‡ç« ä½œè€…
  site: 'https://blog.cosine.ren/', // ç«™ç‚¹åŸŸå
  startYear: 2020,               // ç«™ç‚¹åˆ›å»ºå¹´ä»½
  keywords: ['cos', 'cosine', 'åšå®¢', 'å‰ç«¯'], // SEO å…³é”®è¯
};
```

**ç‰¹è‰²åˆ†ç±»é…ç½®ï¼š**

åœ¨é¦–é¡µåº•éƒ¨å±•ç¤ºçš„ç²¾é€‰åˆ†ç±»å¡ç‰‡ï¼š

```typescript
featuredCategories: [
  {
    link: 'life',              // åˆ†ç±»é“¾æ¥ï¼ˆå¯¹åº” category_mapï¼‰
    label: 'éšç¬”',             // æ˜¾ç¤ºåç§°
    image: '/img/cover/2.webp', // å°é¢å›¾ç‰‡
    description: 'ç”Ÿæ´»è®°å½•ã€å¹´åº¦æ€»ç»“ç­‰', // æè¿°
  },
  // ... æ›´å¤šåˆ†ç±»
]
```

**å‘¨åˆŠ/ç³»åˆ—é…ç½®ï¼š**

é…ç½®ç‰¹è‰²ç³»åˆ—ï¼ˆå¦‚å‘¨åˆŠï¼‰ï¼š

```typescript
featuredSeries: {
  categoryName: 'å‘¨åˆŠ',        // åˆ†ç±»åç§°
  label: 'FE Bits',           // æ˜¾ç¤ºæ ‡ç­¾
  fullName: 'FE Bits å‰ç«¯å‘¨å‘¨è°ˆ', // å®Œæ•´åç§°
  description: '...',         // æè¿°
  cover: '/img/weekly_header.webp', // å°é¢å›¾
  enabled: true,              // æ˜¯å¦å¯ç”¨
  links: {                    // ç›¸å…³é“¾æ¥
    github: 'https://github.com/...',
    rss: 'https://...',
    chrome: 'https://...',
  },
}
```

### ç¤¾äº¤åª’ä½“é…ç½®

åœ¨ `src/constants/site-config.ts` ä¸­é…ç½®ç¤¾äº¤åª’ä½“é“¾æ¥ï¼š

```typescript
export const socialConfig: SocialConfig = {
  github: {
    url: 'https://github.com/yusixian',
    icon: 'ri:github-fill',      // Iconify å›¾æ ‡å
    color: '#191717',            // ä¸»é¢˜è‰²
  },
  bilibili: {
    url: 'https://space.bilibili.com/10730895',
    icon: 'ri:bilibili-fill',
    color: '#da708a',
  },
  // ... æ›´å¤šå¹³å°
};
```

æ”¯æŒçš„å¹³å°ï¼šGitHub, Twitter, Bilibili, ç½‘æ˜“äº‘éŸ³ä¹, Email, RSS ç­‰ã€‚

### å¯¼èˆªé…ç½®

ç¼–è¾‘ `src/constants/router.ts` è‡ªå®šä¹‰å¯¼èˆªèœå•ï¼š

```typescript
export const routers: Router[] = [
  { name: 'é¦–é¡µ', path: Routes.Home, icon: 'fa6-solid:house-chimney' },
  { name: 'å‘¨åˆŠ', path: Routes.Weekly, icon: 'ri:newspaper-line' },
  {
    name: 'æ–‡ç« ',
    icon: 'ri:quill-pen-ai-fill',
    children: [  // æ”¯æŒåµŒå¥—å­èœå•
      { name: 'åˆ†ç±»', path: Routes.Categories, icon: 'ri:grid-fill' },
      { name: 'æ ‡ç­¾', path: Routes.Tags, icon: 'fa6-solid:tags' },
      { name: 'å½’æ¡£', path: Routes.Archives, icon: 'ri:archive-2-fill' },
    ],
  },
  { name: 'å‹é“¾', path: Routes.Friends, icon: 'ri:links-line' },
  { name: 'å…³äº', path: Routes.About, icon: 'fa6-regular:circle-user' },
];
```

### åˆ†ç±»æ˜ å°„é…ç½®

ç¼–è¾‘ `_config.yml` é…ç½®ä¸­æ–‡åˆ†ç±»ååˆ° URL slug çš„æ˜ å°„ï¼š

```yaml
category_map:
  éšç¬”: life
  ç¬”è®°: note
  å‰ç«¯: front-end
  åç«¯: back-end
  å·¥å…·: tools
  å‘¨åˆŠ: weekly
  AI: ai
```

è¿™æ ·ï¼Œ"éšç¬”" åˆ†ç±»çš„ URL ä¼šæ˜¯ `/categories/life`ï¼Œè€Œä¸æ˜¯ `/categories/éšç¬”`ã€‚

## æ–‡ç« ç³»ç»Ÿ

### åˆ›å»ºæ–‡ç« 

åœ¨ `src/content/blog/` ç›®å½•ä¸‹åˆ›å»º Markdown æ–‡ä»¶ã€‚ç›®å½•ç»“æ„ä¼šå½±å“æ–‡ç« çš„åˆ†ç±»ï¼š

```plain
src/content/blog/
â”œâ”€â”€ life/              # éšç¬”åˆ†ç±»
â”‚   â””â”€â”€ 2024-life-review.md
â”œâ”€â”€ note/
â”‚   â”œâ”€â”€ front-end/     # ç¬”è®° > å‰ç«¯
â”‚   â”‚   â””â”€â”€ react/
â”‚   â”‚       â””â”€â”€ Reactå­¦ä¹ å°è®°.md
â”‚   â””â”€â”€ algorithm/     # ç¬”è®° > ç®—æ³•
â”‚       â””â”€â”€ åŠ¨æ€è§„åˆ’å­¦ä¹ ç¬”è®°.md
â””â”€â”€ tools/             # å·¥å…·åˆ†ç±»
    â””â”€â”€ vscodeæ’ä»¶æ¨è.md
```

### Frontmatter å­—æ®µè¯´æ˜

æ¯ç¯‡æ–‡ç« å¼€å¤´éœ€è¦åŒ…å« YAML frontmatterï¼š

**å¿…å¡«å­—æ®µï¼š**

```yaml
---
title: æ–‡ç« æ ‡é¢˜ # å¿…å¡«
date: 2024-12-06 # å¿…å¡«ï¼Œå‘å¸ƒæ—¥æœŸ
---
```

**å¸¸ç”¨å¯é€‰å­—æ®µï¼š**

```yaml
---
title: æ–‡ç« æ ‡é¢˜
date: 2024-12-06
description: æ–‡ç« æ‘˜è¦æè¿° # ç”¨äº SEO å’Œåˆ—è¡¨å±•ç¤ºï¼Œå¦‚ä¸å¡«å†™ä¼šè‡ªåŠ¨ä½¿ç”¨ AI æ‘˜è¦æˆ–æå–æ­£æ–‡å‰ 150 å­—
link: custom-url-slug # è‡ªå®šä¹‰ URLï¼ˆé»˜è®¤ä½¿ç”¨æ–‡ä»¶åï¼‰
cover: /img/cover/1.webp # å°é¢å›¾ç‰‡
tags: # æ ‡ç­¾åˆ—è¡¨
  - JavaScript
  - React
categories: # åˆ†ç±»ï¼ˆè§ä¸‹æ–¹è¯¦ç»†è¯´æ˜ï¼‰
  - ç¬”è®°
subtitle: å‰¯æ ‡é¢˜ # æ–‡ç« å‰¯æ ‡é¢˜
catalog: true # æ˜¯å¦æ˜¾ç¤ºç›®å½•ï¼ˆé»˜è®¤ trueï¼‰
draft: false # æ˜¯å¦ä¸ºè‰ç¨¿ï¼ˆé»˜è®¤ falseï¼‰
sticky: false # æ˜¯å¦ç½®é¡¶ï¼ˆé»˜è®¤ falseï¼‰
---
```

**å…³äº description å­—æ®µï¼š**

æ–‡ç« æè¿°çš„ä¼˜å…ˆçº§ï¼šæ‰‹å†™ `description` > AI è‡ªåŠ¨æ‘˜è¦ > Markdown æ­£æ–‡å‰ 150 å­—

- å»ºè®®ä¸ºé‡è¦æ–‡ç« æ‰‹å†™æè¿°ï¼Œä»¥è·å¾—æ›´å¥½çš„ SEO æ•ˆæœ
- å¦‚æœçœç•¥æè¿°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨ AI ç”Ÿæˆçš„æ‘˜è¦ï¼ˆéœ€è¿è¡Œ `pnpm generate:summaries`ï¼‰
- å¦‚æœæ—¢æ²¡æœ‰æ‰‹å†™æè¿°ä¹Ÿæ²¡æœ‰ AI æ‘˜è¦ï¼Œåˆ™è‡ªåŠ¨æå–æ–‡ç« æ­£æ–‡çš„å‰ 150 ä¸ªå­—ç¬¦

### åˆ†ç±»ç³»ç»Ÿ

astro-koharu æ”¯æŒçµæ´»çš„åˆ†ç±»é…ç½®ï¼š

**å•å±‚åˆ†ç±»ï¼š**

```yaml
categories:
  - å·¥å…· # æˆ–è€… ['å·¥å…·']
```

å¯¹åº” URL: `/categories/tools`ï¼ˆæ ¹æ® `_config.yml` æ˜ å°„ï¼‰

**å¤šå±‚åµŒå¥—åˆ†ç±»ï¼š**

```yaml
categories:
  - [ç¬”è®°, å‰ç«¯, React]
```

è¿™ä¼šåˆ›å»ºå±‚çº§å…³ç³»ï¼šç¬”è®° â†’ å‰ç«¯ â†’ React

å¯¹åº” URL: `/categories/note/front-end/react`

### æ ‡ç­¾ç³»ç»Ÿ

æ ‡ç­¾æ˜¯æ‰å¹³çš„ï¼Œä¸æ”¯æŒå±‚çº§ï¼š

```yaml
tags:
  - JavaScript
  - TypeScript
  - å­¦ä¹ ç¬”è®°
```

æ‰€æœ‰æ ‡ç­¾ä¼šåœ¨ `/tags` é¡µé¢å±•ç¤ºï¼Œç‚¹å‡»æ ‡ç­¾å¯æŸ¥çœ‹è¯¥æ ‡ç­¾ä¸‹çš„æ‰€æœ‰æ–‡ç« ã€‚

### è‰ç¨¿åŠŸèƒ½

è®¾ç½® `draft: true` å°†æ–‡ç« æ ‡è®°ä¸ºè‰ç¨¿ï¼š

```yaml
---
title: æœªå®Œæˆçš„æ–‡ç« 
draft: true
---
```

**è¡Œä¸ºï¼š**

- **æœ¬åœ°å¼€å‘** (`pnpm dev`)ï¼šè‰ç¨¿å¯è§ï¼Œæ–‡ç« å¡ç‰‡å³ä¸Šè§’æ˜¾ç¤º "DRAFT" æ ‡è¯†
- **ç”Ÿäº§æ„å»º** (`pnpm build`)ï¼šè‰ç¨¿è‡ªåŠ¨è¿‡æ»¤ï¼Œä¸ä¼šå‡ºç°åœ¨ä»»ä½•åˆ—è¡¨ä¸­

### ç½®é¡¶åŠŸèƒ½

è®¾ç½® `sticky: true` å°†æ–‡ç« ç½®é¡¶ï¼š

```yaml
---
title: é‡è¦å…¬å‘Š
sticky: true
---
```

**è¡Œä¸ºï¼š**

- ç½®é¡¶æ–‡ç« æ˜¾ç¤ºåœ¨é¦–é¡µ "ç½®é¡¶æ–‡ç« " åŒºåŸŸ
- ç½®é¡¶æ–‡ç« æŒ‰æ—¥æœŸæ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
- ä¸å½±å“å…¶ä»–é¡µé¢ï¼ˆåˆ†ç±»ã€æ ‡ç­¾ã€å½’æ¡£ï¼‰çš„æ’åº

### å‘¨åˆŠ/ç³»åˆ—æ–‡ç« 

å¦‚æœé…ç½®äº† `featuredSeries`ï¼ˆè§åŸºæœ¬é…ç½®ï¼‰ï¼Œè¯¥åˆ†ç±»ä¸‹çš„æ–‡ç« ä¼šï¼š

1. åœ¨é¦–é¡µç½®é¡¶åŒºåŸŸæ˜¾ç¤ºæœ€æ–°ä¸€ç¯‡
2. æ‹¥æœ‰ä¸“å±çš„å‘¨åˆŠé¡µé¢ (`/weekly`)
3. ä¸å‡ºç°åœ¨æ™®é€šæ–‡ç« åˆ—è¡¨ä¸­

**ç¤ºä¾‹ï¼š**

```yaml
---
title: FE Bits Vol.16
categories:
  - å‘¨åˆŠ # å¯¹åº” featuredSeries.categoryName
---
```

## ç•Œé¢åŠŸèƒ½

### ä¸»é¢˜åˆ‡æ¢

ç‚¹å‡»å³ä¸Šè§’çš„å¤ªé˜³/æœˆäº®å›¾æ ‡åˆ‡æ¢æ·±è‰²/æµ…è‰²æ¨¡å¼ã€‚

**ä»£ç é«˜äº®ï¼š**

- æµ…è‰²æ¨¡å¼ï¼š`github-light`
- æ·±è‰²æ¨¡å¼ï¼š`github-dark`

### å…¨ç«™æœç´¢

åŸºäº [Pagefind](https://pagefind.app/) çš„é™æ€ç«™ç‚¹æœç´¢ï¼Œæ— éœ€åç«¯æœåŠ¡å™¨ã€‚

**æ‰“å¼€æœç´¢ï¼š**

- ç‚¹å‡»å¯¼èˆªæ æœç´¢å›¾æ ‡
- å¿«æ·é”®ï¼š`Cmd/Ctrl + K`

**ç‰¹æ€§ï¼š**

- æ”¯æŒä¸­æ–‡åˆ†è¯
- å®æ—¶æœç´¢ç»“æœ
- é«˜äº®åŒ¹é…å…³é”®è¯
- æ˜¾ç¤ºæ–‡ç« æ‘˜è¦å’Œå…ƒä¿¡æ¯

### æ–‡ç« é˜…è¯»åŠŸèƒ½

**ç›®å½•å¯¼èˆª (Table of Contents)ï¼š**

- è‡ªåŠ¨æå–æ–‡ç« æ ‡é¢˜ï¼ˆh2-h4ï¼‰ç”Ÿæˆç›®å½•
- ç‚¹å‡»ç›®å½•é¡¹è·³è½¬åˆ°å¯¹åº”ç« èŠ‚
- æ»šåŠ¨æ—¶è‡ªåŠ¨é«˜äº®å½“å‰ç« èŠ‚
- æ¡Œé¢ç«¯æ˜¾ç¤ºåœ¨å³ä¾§è¾¹æ ï¼Œç§»åŠ¨ç«¯æŠ˜å 

**é˜…è¯»è¿›åº¦æ¡ï¼š**

- é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºé˜…è¯»è¿›åº¦
- å®æ—¶æ›´æ–°å½“å‰é˜…è¯»ä½ç½®

**æ ‡é¢˜é”šç‚¹é“¾æ¥ï¼š**

- æ¯ä¸ªæ ‡é¢˜è‡ªåŠ¨ç”Ÿæˆ ID
- æ‚¬åœæ ‡é¢˜æ—¶æ˜¾ç¤º `#` é“¾æ¥å›¾æ ‡
- ç‚¹å‡»å¯å¤åˆ¶å¸¦é”šç‚¹çš„ URL

**ç³»åˆ—æ–‡ç« å¯¼èˆªï¼š**

æ–‡ç« åº•éƒ¨æ˜¾ç¤ºåŒç³»åˆ—çš„ä¸Šä¸€ç¯‡/ä¸‹ä¸€ç¯‡ï¼š

- åŸºäºæœ€æ·±å±‚åˆ†ç±»è‡ªåŠ¨åˆ†ç»„
- æŒ‰å‘å¸ƒæ—¥æœŸæ’åº
- æ˜¾ç¤ºæ–‡ç« æ ‡é¢˜å’Œå°é¢

**é˜…è¯»æ—¶é—´ä¼°ç®—ï¼š**

æ–‡ç« å¡ç‰‡æ˜¾ç¤ºé¢„è®¡é˜…è¯»æ—¶é—´ï¼ˆåŸºäºå­—æ•°è®¡ç®—ï¼‰ã€‚

### å“åº”å¼è®¾è®¡

**æ¡Œé¢ç«¯ï¼š**

- åŒæ å¸ƒå±€ï¼ˆä¸»å†…å®¹ + ä¾§è¾¹æ ï¼‰
- å›ºå®šå¯¼èˆªæ 
- æ‚¬æµ®ç›®å½•

**å¹³æ¿ï¼š**

- è‡ªé€‚åº”å¸ƒå±€è°ƒæ•´
- ç®€åŒ–ä¾§è¾¹æ 

**ç§»åŠ¨ç«¯ï¼š**

- å•æ å¸ƒå±€
- æŠ½å±‰å¼å¯¼èˆªèœå•ï¼ˆæ±‰å ¡èœå•ï¼‰
- æŠ˜å å¼ç›®å½•
- è§¦æ‘¸ä¼˜åŒ–çš„äº¤äº’

## ç‰¹è‰²åŠŸèƒ½

### å‘¨åˆŠç³»ç»Ÿ

å¦‚æœå¯ç”¨äº† `featuredSeries`ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå‘¨åˆŠç›¸å…³åŠŸèƒ½ï¼š

**ä¸“å±å‘¨åˆŠé¡µé¢** (`/weekly`)ï¼š

- æ˜¾ç¤ºæ‰€æœ‰å‘¨åˆŠæ–‡ç« 
- å‘¨åˆŠå¤´å›¾å’Œä»‹ç»
- ç›¸å…³é“¾æ¥ï¼ˆGitHub, RSS ç­‰ï¼‰

**é¦–é¡µå±•ç¤ºï¼š**

- æœ€æ–°å‘¨åˆŠæ–‡ç« ç½®é¡¶æ˜¾ç¤º
- ç‹¬ç«‹äºæ™®é€šæ–‡ç« åˆ—è¡¨

### å½’æ¡£é¡µé¢

è®¿é—® `/archives` æŸ¥çœ‹æ‰€æœ‰æ–‡ç« çš„å½’æ¡£è§†å›¾ï¼š

- æŒ‰å¹´ä»½åˆ†ç»„
- æ˜¾ç¤ºæ¯å¹´çš„æ–‡ç« æ•°é‡
- æ—¶é—´çº¿å¼å±•ç¤º
- åŒ…å«æ–‡ç« å‘å¸ƒæ—¥æœŸã€æ ‡é¢˜ã€åˆ†ç±»

### å‹é“¾ç³»ç»Ÿ

è®¿é—® `/friends` æŸ¥çœ‹å‹æƒ…é“¾æ¥é¡µé¢ï¼š

**åŠŸèƒ½ï¼š**

- å‹é“¾å¡ç‰‡å±•ç¤º
- å‹é“¾ç”³è¯·è¡¨å•ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
- æ”¯æŒå¤´åƒã€åç§°ã€æè¿°ã€é“¾æ¥

### ç›¸å…³æ–‡ç« æ¨è

å‚è€ƒ [No Server, No Database: Smarter Related Posts in Astro with `transformers.js`](https://alexop.dev/posts/semantic-related-posts-astro-transformersjs/)

åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦çš„æ™ºèƒ½æ–‡ç« æ¨èç³»ç»Ÿï¼Œä½¿ç”¨ [transformers.js](https://huggingface.co/docs/transformers.js) åœ¨æœ¬åœ°ç”Ÿæˆæ–‡ç« åµŒå…¥å‘é‡ï¼Œè®¡ç®—æ–‡ç« é—´çš„è¯­ä¹‰ç›¸ä¼¼åº¦ã€‚

**ç‰¹æ€§ï¼š**

- ğŸ§  åŸºäº AI åµŒå…¥æ¨¡å‹ï¼ˆSnowflake Arctic Embedï¼‰çš„è¯­ä¹‰ç†è§£
- ğŸ“Š è‡ªåŠ¨è®¡ç®—æ–‡ç« é—´çš„ç›¸ä¼¼åº¦ï¼Œæ¨èæœ€ç›¸å…³çš„ 5 ç¯‡æ–‡ç« 
- ğŸš€ æ„å»ºæ—¶é¢„è®¡ç®—ï¼Œè¿è¡Œæ—¶é›¶å¼€é”€
- ğŸ”§ æ”¯æŒæ’é™¤ç‰¹å®šæ–‡ç« ï¼ˆå¦‚å‘¨åˆŠï¼‰

**ä½¿ç”¨æ–¹å¼ï¼š**

```bash
# ç”Ÿæˆç›¸ä¼¼åº¦æ•°æ®ï¼ˆæœ¬åœ°è¿è¡Œï¼Œä¼šè‡ªåŠ¨ä¸‹è½½æ¨¡å‹ï¼Œçº¦éœ€ 3-5 åˆ†é’Ÿï¼‰
pnpm generate:similarities

# ç”Ÿæˆçš„æ–‡ä»¶ä¼šæäº¤åˆ° gitï¼ŒVercel ç­‰å¹³å°ç›´æ¥ä½¿ç”¨
```

**é…ç½®æ’é™¤è§„åˆ™ï¼š**

ç¼–è¾‘ `src/scripts/generateSimilarities.ts` ä¸­çš„ `EXCLUDE_PATTERNS`ï¼š

```typescript
const EXCLUDE_PATTERNS = [
  'weekly-', // æ’é™¤å‘¨åˆŠæ–‡ç« 
];
```

**é…ç½®è®¡ç®—å†…å®¹ï¼š**

å¯ä»¥é€‰æ‹©æ˜¯å¦å°†æ–‡ç« æ­£æ–‡çº³å…¥ç›¸ä¼¼åº¦è®¡ç®—ï¼š

```typescript
// true: ä½¿ç”¨ æ ‡é¢˜ + æè¿° + æ­£æ–‡ï¼ˆæ›´å‡†ç¡®ï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼‰
// false: ä»…ä½¿ç”¨ æ ‡é¢˜ + æè¿°ï¼ˆæ›´å¿«ï¼Œé€‚åˆæ–‡ç« æ•°é‡è¾ƒå¤šçš„æƒ…å†µï¼‰
const INCLUDE_BODY = true;
```

- **åŒ…å«æ­£æ–‡**ï¼šç›¸ä¼¼åº¦æ›´ç²¾ç¡®ï¼Œèƒ½è¯†åˆ«å†…å®¹å±‚é¢çš„ç›¸å…³æ€§ï¼Œä½†ç”Ÿæˆé€Ÿåº¦è¾ƒæ…¢
- **ä»…æ ‡é¢˜+æè¿°**ï¼šç”Ÿæˆé€Ÿåº¦å¿«ï¼Œé€‚åˆæè¿°å†™å¾—æ¯”è¾ƒè¯¦ç»†çš„åšå®¢

```bash
# ä½¿ç”¨ Snowflake/snowflake-arctic-embed-m-v2.0 è®¡ç®— 168 ç¯‡æ–‡ç« ï¼ˆæ ‡é¢˜+æè¿°ï¼‰çš„æ—¶é—´
Done! Generated similarities for 168 posts in 4.1s

# ä½¿ç”¨ Snowflake/snowflake-arctic-embed-m-v2.0 è®¡ç®— 168 ç¯‡æ–‡ç« ï¼ˆæ ‡é¢˜+æè¿°+æ­£æ–‡ï¼‰çš„æ—¶é—´
Done! Generated similarities for 168 posts in 219.3s
```

è¿™å·®åˆ«æœ‰ç‚¹å¤§ï¼Œä½†æ˜¯æˆ‘ä¸ªäººå¾ˆå–œæ¬¢å¸¦æ­£æ–‡çš„ç»“æœï¼Œæ•ˆæœæ˜¾ç„¶ä¼šæ›´å¥½ã€‚æ‰€ä»¥ç´¢æ€§å†åŠ ä¸€ä¸ªè·‘ AI æ€»ç»“çš„åŠŸèƒ½ã€‚

**æ¨¡å‹é€‰æ‹©ï¼š**

é»˜è®¤ä½¿ç”¨ `Snowflake/snowflake-arctic-embed-m-v2.0` æ¨¡å‹ï¼š

- **æ¨¡å‹å¤§å°**ï¼šçº¦ 90MBï¼ˆé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½åˆ° `.cache/transformers` ç›®å½•ï¼‰
- **å‘é‡ç»´åº¦**ï¼š768 ç»´
- **æ€§èƒ½**ï¼šå¹³è¡¡äº†è´¨é‡å’Œé€Ÿåº¦ï¼Œé€‚åˆä¸­æ–‡å’Œè‹±æ–‡å†…å®¹
- **ç”Ÿæˆæ—¶é—´**ï¼šçº¦ 3-5 åˆ†é’Ÿï¼ˆ169 ç¯‡æ–‡ç« ï¼‰

å¦‚éœ€æ›´æ¢æ¨¡å‹ï¼Œç¼–è¾‘ `src/scripts/generateSimilarities.ts` ä¸­çš„ `MODEL_NAME`ï¼š

```typescript
const MODEL_NAME = 'Snowflake/snowflake-arctic-embed-m-v2.0';
// å¯é€‰æ›¿ä»£æ–¹æ¡ˆï¼š
// const MODEL_NAME = 'sentence-transformers/all-MiniLM-L6-v2'; // æ›´å°æ›´å¿«ï¼ˆçº¦ 23MBï¼‰ï¼Œ384 ç»´
// const MODEL_NAME = 'BAAI/bge-small-zh-v1.5';  // é’ˆå¯¹ä¸­æ–‡ä¼˜åŒ–
```

**å…¶ä»–å¯é€‰æ¨¡å‹å¯¹æ¯”ï¼š**

| æ¨¡å‹                                      | å¤§å°  | ç»´åº¦ | ä¼˜åŠ¿               |
| ----------------------------------------- | ----- | ---- | ------------------ |
| `Snowflake/snowflake-arctic-embed-m-v2.0` | ~90MB | 768  | è´¨é‡é«˜ï¼Œä¸­è‹±æ–‡å‡è¡¡ |
| `sentence-transformers/all-MiniLM-L6-v2`  | ~23MB | 384  | è½»é‡å¿«é€Ÿ           |
| `BAAI/bge-small-zh-v1.5`                  | ~95MB | 512  | ä¸­æ–‡ä¸“ç”¨           |

**æ³¨æ„äº‹é¡¹ï¼š**

- éœ€è¦æœ¬åœ°è¿è¡Œç”Ÿæˆè„šæœ¬ï¼ˆVercel ç­‰å¹³å°æ— æ³•è¿è¡Œæ¨¡å‹ï¼‰
- ç”Ÿæˆçš„ `src/assets/similarities.json` éœ€è¦æäº¤åˆ° git
- å¦‚æœæ²¡æœ‰ç”Ÿæˆç›¸ä¼¼åº¦æ–‡ä»¶ï¼Œç›¸å…³æ–‡ç« æ¨¡å—ä¸ä¼šæ˜¾ç¤º
- æ¨¡å‹æ–‡ä»¶ä¼šç¼“å­˜åœ¨ `.cache/transformers` ç›®å½•ï¼ˆå·²æ·»åŠ åˆ° `.gitignore`ï¼‰

### AI è‡ªåŠ¨æ‘˜è¦

åŸºäº [transformers.js](https://huggingface.co/docs/transformers.js) çš„æ™ºèƒ½æ‘˜è¦ç”Ÿæˆç³»ç»Ÿï¼Œä½¿ç”¨å…ˆè¿›çš„ AI æ¨¡å‹ä¸ºæ–‡ç« è‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡æ‘˜è¦ã€‚

**ä¸ç›¸å…³æ–‡ç« æ¨èçš„å…³ç³»ï¼š**

AI æ‘˜è¦åŠŸèƒ½ä¸ç›¸å…³æ–‡ç« æ¨èåŠŸèƒ½ç›¸è¾…ç›¸æˆï¼š

- **ç›¸ä¼¼åº¦è®¡ç®—**éœ€è¦è¯»å–æ–‡ç« å…¨æ–‡ï¼Œè®¡ç®—æˆæœ¬è¾ƒé«˜ï¼ˆçº¦ 3-5 åˆ†é’Ÿï¼‰
- **AI æ‘˜è¦**å¯ä»¥åœ¨ä¸è¯»å–å…¨æ–‡çš„æƒ…å†µä¸‹æä¾›ä¼˜è´¨æè¿°ï¼ŒåŒæ—¶ç”Ÿæˆçš„æ‘˜è¦ä¹Ÿèƒ½å¸®åŠ©æ”¹å–„ç›¸ä¼¼åº¦è®¡ç®—çš„æ•ˆæœ
- ä¸¤è€…å…±äº«ç›¸åŒçš„æ¨¡å‹ç¼“å­˜æœºåˆ¶ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´

**ç‰¹æ€§ï¼š**

- ğŸ¤– åŸºäºå…ˆè¿›çš„æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ï¼ˆXenova/LaMini-Flan-T5-783Mï¼‰
- ğŸ“ è‡ªåŠ¨ä¸ºç¼ºå°‘æè¿°çš„æ–‡ç« ç”Ÿæˆæ‘˜è¦
- âœ¨ æ–‡ç« è¯¦æƒ…é¡µæ”¯æŒæ‰“å­—æœºåŠ¨ç”»å±•ç¤ºï¼Œå¢å¼ºé˜…è¯»ä½“éªŒ
- ğŸ¯ æ™ºèƒ½ fallbackï¼šä¼˜å…ˆä½¿ç”¨æ‰‹å†™ descriptionï¼Œæ— æè¿°æ—¶è‡ªåŠ¨ä½¿ç”¨ AI æ‘˜è¦
- ğŸš€ æ„å»ºæ—¶é¢„ç”Ÿæˆï¼Œè¿è¡Œæ—¶é›¶å¼€é”€
- â™¿ æ”¯æŒæ— éšœç¢è®¿é—®å’Œ prefers-reduced-motion

**ä½¿ç”¨æ–¹å¼ï¼š**

```bash
# ç”Ÿæˆ AI æ‘˜è¦ï¼ˆæœ¬åœ°è¿è¡Œï¼Œé¦–æ¬¡ä¼šä¸‹è½½æ¨¡å‹ï¼Œçº¦éœ€ 5-10 åˆ†é’Ÿï¼‰
pnpm generate:summaries

# ç”Ÿæˆçš„æ–‡ä»¶è¦æäº¤åˆ° gitï¼Œç„¶åå¯ä»¥åœ¨ Vercel ç­‰å¹³å°ç›´æ¥ä½¿ç”¨
```

**ç”Ÿæˆæ•ˆæœï¼š**

AI æ‘˜è¦ä¼šä¿å­˜åœ¨ `src/assets/summaries.json` æ–‡ä»¶ä¸­ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "article-slug": {
    "title": "æ–‡ç« æ ‡é¢˜",
    "summary": "AI ç”Ÿæˆçš„æ‘˜è¦å†…å®¹..."
  }
}
```

**åœ¨å“ªé‡Œä½¿ç”¨ï¼š**

1. **æ–‡ç« è¯¦æƒ…é¡µ**ï¼šé¢åŒ…å±‘å¯¼èˆªä¸‹æ–¹æ˜¾ç¤ºå¯æŠ˜å çš„ AI æ‘˜è¦å¡ç‰‡
   - é»˜è®¤æ”¶èµ·çŠ¶æ€ï¼Œç‚¹å‡»"å±•å¼€"æŒ‰é’®è§¦å‘
   - å±•å¼€åä»¥æ‰“å­—æœºåŠ¨ç”»é€å­—æ˜¾ç¤ºæ‘˜è¦å†…å®¹
   - æ‰“å­—æœºåŠ¨ç”»ä»…æ’­æ”¾ä¸€æ¬¡ï¼Œæ”¯æŒ `prefers-reduced-motion` ç”¨æˆ·åå¥½

2. **æ–‡ç« å¡ç‰‡**ï¼šä½œä¸ºæè¿°çš„ fallback
   - ä¼˜å…ˆçº§ï¼šæ‰‹å†™ `description` > AI æ‘˜è¦ > Markdown å‰ 150 å­—
   - åœ¨æ–‡ç« åˆ—è¡¨ã€é¦–é¡µã€åˆ†ç±»é¡µç­‰å¤„è‡ªåŠ¨ä½¿ç”¨

**æ¨¡å‹é€‰æ‹©ï¼š**

é»˜è®¤ä½¿ç”¨ `Xenova/LaMini-Flan-T5-783M` æ¨¡å‹ï¼š

- **æ¨¡å‹å¤§å°**ï¼šçº¦ 300MBï¼ˆé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½åˆ° `.cache/transformers` ç›®å½•ï¼‰
- **ç”Ÿæˆè´¨é‡**ï¼šé«˜è´¨é‡çš„ä¸­è‹±æ–‡æ‘˜è¦ç”Ÿæˆ
- **ç”Ÿæˆæ—¶é—´**ï¼šçº¦ 5-10 åˆ†é’Ÿï¼ˆ169 ç¯‡æ–‡ç« ï¼‰

å¦‚éœ€æ›´æ¢æ¨¡å‹ï¼Œç¼–è¾‘ `src/scripts/generateSummaries.ts` ä¸­çš„ `MODEL_NAME`ï¼š

```typescript
const MODEL_NAME = 'Xenova/LaMini-Flan-T5-783M';
// å¯é€‰æ›¿ä»£æ–¹æ¡ˆï¼š
// const MODEL_NAME = 'Xenova/distilbart-cnn-6-6'; // æ›´å¿«ï¼Œè‹±æ–‡æ•ˆæœå¥½
// const MODEL_NAME = 'facebook/bart-large-cnn';   // è´¨é‡æ›´é«˜ï¼Œä½†é€Ÿåº¦è¾ƒæ…¢
```

**é…ç½®æç¤ºè¯ï¼š**

å¯ä»¥è‡ªå®šä¹‰ç”Ÿæˆæ‘˜è¦çš„æç¤ºè¯ï¼Œç¼–è¾‘ `src/scripts/generateSummaries.ts` ä¸­çš„ `PROMPT_TEMPLATE`ï¼š

```typescript
const PROMPT_TEMPLATE = (title: string, content: string) =>
  `è¯·ä¸ºä»¥ä¸‹æ–‡ç« ç”Ÿæˆä¸€æ®µç®€æ´çš„æ‘˜è¦ï¼ˆ100-150å­—ï¼‰ï¼š\n\næ ‡é¢˜ï¼š${title}\n\nå†…å®¹ï¼š${content}`;
```

**æ³¨æ„äº‹é¡¹ï¼š**

- éœ€è¦æœ¬åœ°è¿è¡Œç”Ÿæˆè„šæœ¬ï¼ˆVercel ç­‰å¹³å°æ— æ³•è¿è¡Œå¤§æ¨¡å‹ï¼‰
- ç”Ÿæˆçš„ `src/assets/summaries.json` éœ€è¦æäº¤åˆ° git
- å¦‚æœæ²¡æœ‰ç”Ÿæˆæ‘˜è¦æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨ fallback åˆ° Markdown æ–‡æœ¬æå–
- æ¨¡å‹æ–‡ä»¶ä¼šç¼“å­˜åœ¨ `.cache/transformers` ç›®å½•ï¼ˆå·²æ·»åŠ åˆ° `.gitignore`ï¼‰
- é¦–æ¬¡è¿è¡Œéœ€è¦ä¸‹è½½æ¨¡å‹ï¼Œå»ºè®®åœ¨ç½‘ç»œè‰¯å¥½çš„ç¯å¢ƒä¸‹è¿›è¡Œ

**æœ€ä½³å®è·µï¼š**

1. **ä¸ç›¸ä¼¼åº¦è®¡ç®—é…åˆä½¿ç”¨**ï¼š

   ```bash
   # å…ˆç”Ÿæˆæ‘˜è¦
   pnpm generate:summaries
   # å†è®¡ç®—ç›¸ä¼¼åº¦ï¼ˆå¯ä»¥ä½¿ç”¨æ‘˜è¦ä»£æ›¿å…¨æ–‡ï¼Œæå‡é€Ÿåº¦ï¼‰
   pnpm generate:similarities
   ```

2. **é€‰æ‹©æ€§ç”Ÿæˆæ‘˜è¦**ï¼šä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œè„šæœ¬ä¼šè·³è¿‡å·²æœ‰ `description` çš„æ–‡ç« 

3. **æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶**ï¼šå°†ç”Ÿæˆçš„ JSON æ–‡ä»¶æäº¤åˆ° gitï¼Œé¿å…åœ¨ CI/CD ç¯å¢ƒé‡å¤ç”Ÿæˆ

### Markdown å¢å¼º

**è¯­æ³•æ”¯æŒï¼š**

- GitHub Flavored Markdown (GFM)
  - è¡¨æ ¼
  - ä»»åŠ¡åˆ—è¡¨
  - åˆ é™¤çº¿
  - è‡ªåŠ¨é“¾æ¥

**ä»£ç é«˜äº®ï¼š**

- åŸºäº Shiki
- æ”¯æŒåŒä¸»é¢˜ï¼ˆæ·±è‰²/æµ…è‰²ï¼‰
- æ”¯æŒè¯­è¨€æ ‡æ³¨
- è¡Œå·æ˜¾ç¤º

ç¤ºä¾‹ï¼š

````markdown
```javascript
function hello() {
  console.log('Hello, world!');
}
```
````

```javascript
function hello() {
  console.log('Hello, world!');
}
```

**æ ‡é¢˜è‡ªåŠ¨é“¾æ¥ï¼š**

æ‰€æœ‰æ ‡é¢˜è‡ªåŠ¨ç”Ÿæˆå¯ç‚¹å‡»çš„é”šç‚¹é“¾æ¥ã€‚

**é“¾æ¥è‡ªåŠ¨åµŒå…¥ï¼š**

ç‹¬è¡Œçš„ç‰¹æ®Šé“¾æ¥ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºåµŒå…¥ç»„ä»¶ï¼š

- **Twitter/X é“¾æ¥**ï¼šè‡ªåŠ¨åµŒå…¥ Tweet ç»„ä»¶
- **CodePen é“¾æ¥**ï¼šè‡ªåŠ¨åµŒå…¥äº¤äº’å¼ CodePen æ¼”ç¤º
- **å…¶ä»–é“¾æ¥**ï¼šæ˜¾ç¤º OG é¢„è§ˆå¡ç‰‡ï¼ˆåŒ…å«æ ‡é¢˜ã€æè¿°ã€å›¾ç‰‡ç­‰ï¼‰

ç¤ºä¾‹ï¼š

```markdown
<!-- ç‹¬è¡Œé“¾æ¥ä¼šè¢«åµŒå…¥ -->

https://x.com/vercel_dev/status/1997059920936775706

https://codepen.io/botteu/pen/YPKBrJX/

https://github.com/vercel/react-tweet

åçˆ¬ä¸¥æ ¼ï¼Œè·å–ä¸åˆ°å…ƒä¿¡æ¯çš„é“¾æ¥

https://zhuanlan.zhihu.com/p/1900483903984243480

<!-- æ®µè½ä¸­çš„é“¾æ¥ä¿æŒä¸å˜ -->

è¿™æ˜¯ä¸€ä¸ª [æ™®é€šé“¾æ¥](https://example.com)ï¼Œä¸ä¼šè¢«åµŒå…¥ã€‚
```

https://x.com/vercel_dev/status/1997059920936775706

https://codepen.io/botteu/pen/YPKBrJX/

https://github.com/vercel/react-tweet

åçˆ¬ä¸¥æ ¼ï¼Œè·å–ä¸åˆ°å…ƒä¿¡æ¯çš„é“¾æ¥

https://zhuanlan.zhihu.com/p/1900483903984243480

<!-- æ®µè½ä¸­çš„é“¾æ¥ä¿æŒä¸å˜ -->

è¿™æ˜¯ä¸€ä¸ª [æ™®é€šé“¾æ¥](https://example.com)ï¼Œä¸ä¼šè¢«åµŒå…¥ã€‚

**å…¶ä»–å¢å¼ºï¼š**

- è‡ªåŠ¨ç›®å½•ç”Ÿæˆ
- é˜…è¯»æ—¶é—´è®¡ç®—
- å¤–éƒ¨é“¾æ¥è‡ªåŠ¨æ·»åŠ  `target="_blank"`

### RSS è®¢é˜…

è®¿é—® `/rss.xml` è·å– RSS feedã€‚

**åŒ…å«å†…å®¹ï¼š**

- æœ€æ–°æ–‡ç« åˆ—è¡¨
- æ–‡ç« æ‘˜è¦
- å‘å¸ƒæ—¥æœŸ
- æ–‡ç« é“¾æ¥

### æ•°æ®ç»Ÿè®¡

é›†æˆ Umami åˆ†æï¼ˆå¯é€‰ï¼‰ã€‚

åœ¨ `astro.config.mjs` ä¸­é…ç½®ï¼š

```javascript
umami({
  id: 'your-website-id',
  endpointUrl: 'https://stats.example.com',
  hostUrl: 'https://stats.example.com',
});
```

## å¼€å‘æŒ‡å—

### ç›®å½•ç»“æ„

```plain
astro-koharu/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/      # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ common/      # é€šç”¨ç»„ä»¶ï¼ˆé”™è¯¯è¾¹ç•Œç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ ui/          # UI ç»„ä»¶ï¼ˆæŒ‰é’®ã€å¡ç‰‡ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ layout/      # å¸ƒå±€ç»„ä»¶ï¼ˆå¤´éƒ¨ã€ä¾§è¾¹æ ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ post/        # æ–‡ç« ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ category/    # åˆ†ç±»ç»„ä»¶
â”‚   â”‚   â””â”€â”€ theme/       # ä¸»é¢˜åˆ‡æ¢
â”‚   â”œâ”€â”€ content/
â”‚   â”‚   â””â”€â”€ blog/        # åšå®¢æ–‡ç« ï¼ˆMarkdownï¼‰
â”‚   â”œâ”€â”€ layouts/         # é¡µé¢å¸ƒå±€æ¨¡æ¿
â”‚   â”œâ”€â”€ pages/           # é¡µé¢è·¯ç”±
â”‚   â”œâ”€â”€ lib/             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ hooks/           # React hooks
â”‚   â”œâ”€â”€ constants/       # å¸¸é‡é…ç½®
â”‚   â”œâ”€â”€ scripts/         # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ styles/          # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ types/           # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ public/              # é™æ€èµ„æº
â”‚   â””â”€â”€ img/             # å›¾ç‰‡èµ„æº
â”œâ”€â”€ _config.yml          # åˆ†ç±»æ˜ å°„é…ç½®
â”œâ”€â”€ astro.config.mjs     # Astro é…ç½®
â”œâ”€â”€ tailwind.config.ts   # Tailwind é…ç½®
â””â”€â”€ tsconfig.json        # TypeScript é…ç½®
```

### è·¯å¾„åˆ«å

é¡¹ç›®é…ç½®äº†ä»¥ä¸‹è·¯å¾„åˆ«åï¼ˆåœ¨ `tsconfig.json` ä¸­ï¼‰ï¼š

```typescript
import { something } from '@/xxx';           // â†’ src/xxx
import Component from '@components/xxx';     // â†’ src/components/xxx
import { util } from '@lib/xxx';            // â†’ src/lib/xxx
import config from '@constants/xxx';        // â†’ src/constants/xxx
// ... æ›´å¤šåˆ«åè§ tsconfig.json
```

### å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
pnpm dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆé»˜è®¤ localhost:4321ï¼‰

# æ„å»º
pnpm build            # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm preview          # é¢„è§ˆç”Ÿäº§æ„å»º

# ä»£ç è´¨é‡
pnpm lint             # è¿è¡Œ ESLint
pnpm lint-md          # æ£€æŸ¥ Markdown æ–‡ä»¶
pnpm lint-md:fix      # è‡ªåŠ¨ä¿®å¤ Markdown é—®é¢˜
pnpm knip             # æŸ¥æ‰¾æœªä½¿ç”¨çš„æ–‡ä»¶å’Œä¾èµ–

# AI åŠŸèƒ½
pnpm generate:summaries      # ç”Ÿæˆæ–‡ç«  AI æ‘˜è¦
pnpm generate:similarities   # ç”Ÿæˆæ–‡ç« ç›¸ä¼¼åº¦æ•°æ®

# å·¥å…·
pnpm change           # ç”Ÿæˆ CHANGELOG.mdï¼ˆåŸºäº git-cliffï¼‰
```

### å¦‚ä½•æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/pages/` ç›®å½•åˆ›å»º `.astro` æ–‡ä»¶
2. Astro ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ï¼Œæ–‡ä»¶è·¯å¾„å³ URL è·¯å¾„

ç¤ºä¾‹ï¼š

```plain
src/pages/about.astro       â†’ /about
src/pages/tags/[tag].astro  â†’ /tags/:tagï¼ˆåŠ¨æ€è·¯ç”±ï¼‰
```

### å¦‚ä½•è‡ªå®šä¹‰æ ·å¼

**å…¨å±€æ ·å¼ï¼š**

ç¼–è¾‘ `src/styles/index.css`ã€‚

**ç»„ä»¶æ ·å¼ï¼š**

ä½¿ç”¨ Tailwind CSS å·¥å…·ç±»æˆ– Astro çš„ `<style>` æ ‡ç­¾ã€‚

**Tailwind é…ç½®ï¼š**

ç¼–è¾‘ `tailwind.config.ts` è‡ªå®šä¹‰ä¸»é¢˜ã€é¢œè‰²ã€å­—ä½“ç­‰ã€‚

**ä¸»é¢˜å˜é‡ï¼š**

åœ¨ `src/styles/index.css` ä¸­å®šä¹‰çš„ CSS å˜é‡ï¼š

```css
:root {
  --primary-color: #ff6b6b;
  /* ... æ›´å¤šå˜é‡ */
}
```

### åŠ¨ç”»ç³»ç»Ÿ

ä½¿ç”¨ CSS åŠ¨ç”»ä»¥åŠ [Motion](https://motion.dev/)ã€‚

**åŠ¨ç”»é…ç½®ï¼š**

åœ¨ `src/constants/anim/` ç›®å½•ä¸­ï¼š

- `spring.ts` - å¼¹ç°§åŠ¨ç”»é…ç½®
- `variants.ts` - åŠ¨ç”»å˜ä½“å®šä¹‰
- `props.ts` - å¯å¤ç”¨çš„åŠ¨ç”»å±æ€§

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```tsx
import { motion } from 'motion/react';
import { fadeIn } from '@constants/anim/variants';

<motion.div variants={fadeIn} initial="hidden" animate="visible">
  å†…å®¹
</motion.div>
```

## ä¸ Hexo/Shoka ä¸»é¢˜çš„å¯¹æ¯”

### ä¿ç•™çš„ç‰¹æ€§

- âœ… åˆ†ç±»å’Œæ ‡ç­¾ç³»ç»Ÿ
- âœ… æ–‡ç« ç½®é¡¶åŠŸèƒ½
- âœ… æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
- âœ… å“åº”å¼è®¾è®¡
- âœ… å‹é“¾é¡µé¢
- âœ… å½’æ¡£é¡µé¢

### æ”¹è¿›ä¹‹å¤„

**æ€§èƒ½ï¼š**

- âš¡ é™æ€ç«™ç‚¹ç”Ÿæˆ (SSG)ï¼ŒåŠ è½½é€Ÿåº¦æ›´å¿«
- âš¡ æŒ‰éœ€åŠ è½½ JavaScript
- âš¡ å›¾ç‰‡ä¼˜åŒ–

**å¼€å‘ä½“éªŒï¼š**

- ğŸ› ï¸ TypeScript ç±»å‹å®‰å…¨
- ğŸ› ï¸ çƒ­æ¨¡å—æ›¿æ¢ (HMR)
- ğŸ› ï¸ ç°ä»£åŒ–çš„å¼€å‘å·¥å…·é“¾

**åŠŸèƒ½å¢å¼ºï¼š**

- ğŸ” æ›´å¼ºå¤§çš„å…¨ç«™æœç´¢ï¼ˆPagefindï¼‰
- ğŸ“ å†…å®¹é›†åˆ (Content Collections) ç±»å‹å®‰å…¨
- ğŸ¨ Tailwind CSS 4.x æ ·å¼ç³»ç»Ÿ
- ğŸŒŠ View Transitions API é¡µé¢è¿‡æ¸¡

### æŠ€æœ¯æ ˆå·®å¼‚

| æ–¹é¢     | Hexo + Shoka   | astro-koharu        |
| -------- | -------------- | ------------------- |
| æ¡†æ¶     | Hexo (Node.js) | Astro 5.x           |
| æ¨¡æ¿å¼•æ“ | EJS/Pug        | Astro + React       |
| æ ·å¼     | Stylus         | Tailwind CSS 4.x    |
| æ„å»ºå·¥å…· | Webpack        | Vite                |
| ç±»å‹æ£€æŸ¥ | æ—              | TypeScript          |
| å†…å®¹ç®¡ç† | æ–‡ä»¶ç³»ç»Ÿ       | Content Collections |

## å¸¸è§é—®é¢˜

### 1. å¦‚ä½•ä¿®æ”¹å°é¢å›¾ç‰‡ï¼Ÿ

åœ¨æ–‡ç«  frontmatter ä¸­è®¾ç½® `cover` å­—æ®µï¼š

```yaml
cover: /img/cover/1.webp
```

å›¾ç‰‡æ”¾åœ¨ `public/img/` ç›®å½•ã€‚å¦‚æœä¸è®¾ç½®ï¼Œä¼šä½¿ç”¨é»˜è®¤å°é¢ã€‚

### 2. å¦‚ä½•è‡ªå®šä¹‰åŸŸåï¼Ÿ

éƒ¨ç½²åˆ° Vercel åï¼Œåœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸåï¼Œç„¶åæ›´æ–° `src/constants/site-config.ts` ä¸­çš„ `site` å­—æ®µã€‚

### 3. å¦‚ä½•æ·»åŠ è¯„è®ºåŠŸèƒ½ï¼Ÿ

é¡¹ç›®é¢„ç•™äº†è¯„è®ºç»„ä»¶ä½ç½®ï¼ˆ`src/components/comment/`ï¼‰ï¼Œä½ å¯ä»¥é›†æˆ Giscusã€Waline ç­‰è¯„è®ºç³»ç»Ÿã€‚

### 4. è‰ç¨¿æ–‡ç« å¦‚ä½•é¢„è§ˆï¼Ÿ

è¿è¡Œ `pnpm dev` æœ¬åœ°å¼€å‘æ¨¡å¼ï¼Œè‰ç¨¿ä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼ˆå¸¦ DRAFT æ ‡è¯†ï¼‰ã€‚

### 5. å¦‚ä½•å…³é—­æŸäº›åŠŸèƒ½ï¼Ÿ

- **å…³é—­å‘¨åˆŠ**ï¼šè®¾ç½® `featuredSeries.enabled = false`
- **å…³é—­æœç´¢**ï¼šç§»é™¤ `astro.config.mjs` ä¸­çš„ `pagefind()` é›†æˆ
- **å…³é—­ç»Ÿè®¡**ï¼šç§»é™¤ `umami()` é›†æˆ

### 6. å¦‚ä½•æ›´æ”¹æ–‡ç«  URL æ ¼å¼ï¼Ÿ

é»˜è®¤ä½¿ç”¨æ–‡ä»¶åä½œä¸º URLã€‚å¯ä»¥é€šè¿‡ `link` å­—æ®µè‡ªå®šä¹‰ï¼š

```yaml
link: my-custom-url
```

## å‚è€ƒèµ„æº

- [Astro å®˜æ–¹æ–‡æ¡£](https://docs.astro.build/)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/docs)
- [Motion æ–‡æ¡£](https://motion.dev/docs)
- [Pagefind æ–‡æ¡£](https://pagefind.app/)
- [Shoka ä¸»é¢˜æ–‡æ¡£](https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/)

## æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ [CHANGELOG.md](https://github.com/cosZone/astro-koharu/blob/main/CHANGELOG.md) äº†è§£ç‰ˆæœ¬æ›´æ–°å†å²ã€‚

---

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ [GitHub Issues](https://github.com/cosZone/astro-koharu/issues) ä¸­åé¦ˆã€‚
